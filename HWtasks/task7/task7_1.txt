Расширьте приложение FastAPI для работы с заголовками HTTP-запроса, реализованное в предыдущем задании. В новом задании мы оптимизируем сами себя и будет следовать принципу Don't repeat yourself. Теперь Вам необходимо создать модель CommonHeaders с использованием Pydantic для извлечения и проверки заголовков, а затем внедрить эту модель в два отдельных маршрута. Это поможет переиспользовать свой код, избежав дублирования заголовков в двух маршрутах.

1. Создайте модель CommonHeaders для обработки заголовков:

Определите класс CommonHeaders, который будет извлекать значения следующих заголовков из запроса:

User-Agent – обязательное поле, содержащее значение заголовка "User-Agent".

Accept-Language – обязательное поле, содержащее значение заголовка "Accept-Language".

(Опционально) Организуйте валидацию входящих данных так, чтобы при несоответствии формата заголовка Accept-Language (например, не соответствующем шаблону "en-US,en;q=0.9,es;q=0.8") генерировалась ошибка.

2. Реализуйте два маршрута с использованием модели CommonHeaders:

Маршрут /headers (метод GET):

Внедрите модель CommonHeaders в маршрут, чтобы она принимала заголовки из модели.

Верните JSON-ответ, содержащий извлечённые значения заголовков User-Agent и Accept-Language.

Маршрут /info (метод GET):

Аналогично, подключите модель CommonHeaders для извлечения заголовков.

Верните заголовки в теле ответа (в формате JSON), а также расширьте ответ полем message с текстом: "Добро пожаловать! Ваши заголовки успешно обработаны."

Помимо возврата заголовков в теле ответа, добавьте в ответ HTTP-заголовок X-Server-Time, в котором будет возвращаться текущее серверное время.

3. Обработка ошибок:

[Опционально] Если заголовок Accept-Language имеет неверный формат, оба маршрута должны возвращать ответ с описанием ошибки.

Примеры запросов и ответов:

Запрос к /headers:

Запрос:

GET /headers HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept-Language: en-US,en;q=0.9,es;q=0.8


Ответ:

{
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)",
    "Accept-Language": "en-US,en;q=0.9,es;q=0.8"
}


Запрос к /info:

Запрос:

GET /info HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept-Language: en-US,en;q=0.9,es;q=0.8


Ответ:

Тело ответа (JSON):

{
    "message": "Добро пожаловать! Ваши заголовки успешно обработаны.",
    "headers": {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)",
        "Accept-Language": "en-US,en;q=0.9,es;q=0.8"
    }
}


Дополнительно, в заголовках ответа должен присутствовать ключ X-Server-Time с текущей датой и временем, например:

X-Server-Time: 2025-04-16T12:34:56